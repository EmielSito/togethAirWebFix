<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"

>

<ui:composition template="/template.xhtml">
    <ui:define name="content">
        <!-- banner-bottom -->
        <div class="banner-bottom">
            <!-- container -->
            <div class="container">
                <div class="faqs-top-grids">
                    <!--single-page-->
                    <div class="single-page">
                        <div class="col-md-8 single-gd-lt">
                            <div class="single-pg-hdr">
                                <h2>#{msgs['products.results.title1']}#{bookingController.selectedPlane.flight.departure.airportName}#{msgs['products.results.title2']}#{detailsPageController.selectedPlane.flight.destination.airportName}</h2>
                                <p>#{bookingController.selectedPlane.flight.airline.airlineName}</p>
                                <p>#{msgs['products.results.departure']}#{bookingController.selectedPlane.departureDate}</p>
                                <p>#{msgs['products.results.arrival']}#{bookingController.selectedPlane.arrivalDate}</p>
                            </div>
                            <div class="p-table">
                                <h:form>
                                    <p:dataTable var="ticket" value="#{bookingController.tickets}">
                                        <p:column headerText="Person">
                                            <h:outputLabel value="FirstName:"/>
                                            <h:inputText value="#{bookingController.firstName}" required="true"></h:inputText>
                                            <br/><br/>
                                            <h:outputLabel value="LastName:"/>
                                            <h:inputText value="#{bookingController.lastName}" required="true"></h:inputText>
                                            <br/><br/>
                                            <br/><br/>
                                        </p:column>

                                        <p:column headerText="Seat info">
                                            <h:outputText value="Current seat: #{ticket.seat.seatNumber}" />
                                        </p:column>

                                        <p:column headerText="Price per person">
                                            &#8364;<h:outputText value= "#{ticket.seat.basePrice}"/>
                                        </p:column>

                                    </p:dataTable>

                                    <h:selectOneRadio value="#{bookingController.paymentMethod}">
                                        <f:selectItem itemLabel="Credit card" itemValue="creditCard"/>
                                        <f:ajax event="change" listener="#{bookingController.show}" execute="@this" render="choicePanel" />
                                        <f:selectItem itemLabel="Endorsement" itemValue="endorsement"/>
                                    </h:selectOneRadio>
                                    <h:panelGroup id="choicePanel">
                                        <h:panelGrid id="choice" rendered="#{bookingController.showable}">

                                            <h:outputLabel value="AccountNumber"/>
                                            <h:inputText id="accountNumber" value="#{bookingController.accountNumber}">
                                                <f:validateLength minimum="12" maximum="12"/>
                                            </h:inputText>
                                            <h:message for="accountNumber" errorClass="control-label has-error" style="Color:red;"/>
                                            <br/>

                                            <h:outputLabel value="ExpiryDate"/>
                                            <h:inputText id="expiryDate" value="#{bookingController.expiryDate}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/></h:inputText>
                                            <h:message for="expiryDate" errorClass="control-label has-error" style="Color:red;"/>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    <h:commandButton value="Cancel" action="/index"/>
                                    <h:commandButton value="CONFIRM" action="#{ bookingController.confirmBooking}"/>
                                </h:form>
                            </div>
                        </div>
                        <div class="col-md-4 single-gd-rt">
                            <div class="spl-btn">
                                <div class="spl-btn-bor">
                                    <a href="#">
                                        <span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
                                    </a>
                                    <p>ToGethAir Offer</p>
                                    <h:outputScript>
                                        $(document).ready(function () {
                                        $('[data-toggle="tooltip"]').tooltip();
                                        });
                                    </h:outputScript>
                                </div>
                                <div class="sp-bor-btn text-right">
                                    <h4>&#8364;<h:outputText value="#{bookingController.getTotalPrice()}"/></h4>
                                    <p class="best-pri">Total price</p>
                                </div>
                             </div>

                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <!--//single-page-->
                </div>

            </div>
            <!-- //container -->
        </div>
        <!-- //banner-bottom -->
    </ui:define>
</ui:composition>
</html>